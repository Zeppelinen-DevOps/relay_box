# relay_box

emulator relay unit with control interface rs232

## Параметры порта rs232

```
115200 8N1
hardware/software control off
```


## Исполняемые команды
    Все команды представляют собой символьные строки с байтами 0x0d 0x0a на конце


### 1. "SET_ON X Y\r\n"  - команда "замкнуть реле" с номером X на время равное Y секунд (если Y=0 - постоянно)
```
    Ответом на команду будет символьная строка "SET_ON X Y : OK\r\n" - если команда распознана и параметры команды валидные (X=1..8, Y=0..255);
    в противном случае ответ будет таким "SET_ON X Y : ERROR\r\n"
```

### 2. "SET_OFF X Y\r\n" или "SET_OFF X\r\n" - команда "разомкнуть реле" с номером X (параметр Y не имеет значения и может отсутствовать)
```
    Ответом на команду будет символьная строка "SET_OFF X Y : OK\r\n" - если команда распознана, параметры команды валидные (X=1..8, Y=0..255);
    в противном случае ответ будет таким "SET_OFF X Y : ERROR\r\n"
```

### 3. "GET_STAT X\r\n" - команда "запрос статуса реле" с номером X
```
    Ответом на команду будет символьная строка "GET_STAT X : Z\r\n" - если команда распознана, параметры команды валидные (X=1..8),
    где Z=1 - если реле замкнуто, Z=0 - если реле разомкнуто;
    в противном случае ответ будет таким "GET_STAT X : ERROR\r\n"
```

### 4. "GET_STAT\r\n" - команда "запрос статуса всех реле"
```
    Ответом на команду будет символьная строка "GET_STAT : H\r\n" - если команда распознана, где H - байт статуса всех реле,
    то есть позиционный код статуса каждого реле:
	* 1 в нулевом разряде - реле 1 - замкнуто, 0 в нулевом разряде - реле 1 - разомкнуто,
	* 1 в первом - реле 2 - замкнуто, 0 в первом разряде - реле 2 - разомкнуто,
	* .......
	* 1 в седьмом разряде - реле 8 - замкнуто, 0 в седьмом разряде - реле 8 - разомкнуто;
    если команда не распознана ответ будет таким "GET_STAT : ERROR\r\n"
```

